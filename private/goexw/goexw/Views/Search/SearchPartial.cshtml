@using Goexw.Resources
@using Microsoft.Ajax.Utilities
@model Goexw.ViewModels.SearchPartialViewModel

@{
    Layout = null;
}

<div class="row">
    @using (@Html.BeginForm(
        "Index", "Search",
        FormMethod.Get,
        new { id = "searchform", @class = "form-inline col-md-12", role = "form" }))
    {
        <!-- Hidden select element used for submit "category" parameter-->
        @*<select id="search-category" name="category" class="collapse">
                @foreach (var pc in @Model.ProductCategories)
                {
                    <option value="@pc.id"
                        @(pc.id == @Model.UserInput.Category ? "selected" : "")>
                        @pc.id - @pc.text
                    </option>
                    if (pc.children == null)
                    {
                        continue;
                    }
                    foreach (var child in pc.children)
                    {
                        <option value="@child.id"
                                @(child.id == @Model.UserInput.Category ? "selected" : "")>
                            @child.id - @child.text
                        </option>
                    }
                }
            </select>*@
        
        @Html.HiddenFor( m => m.Category)

        <div class="form-group col-md-6">
            <div class="input-group col-md-12">
                <div class="input-group-btn col-md-3 nopadding">
                    <button type="button"
                            class="btn btn-default dropdown-toggle"
                            data-toggle="dropdown"
                            id="search-category-btn"
                            aria-expanded="false">
                        <span>@Model.Categories.First(i => i.Id == @Model.Category).Name</span>
                        <span class="caret"></span>
                    </button>
                    <ul id="categoryList" class="dropdown-menu" role="menu">
                        @foreach (var c in @Model.Categories)
                        {
                            <li value="@c.Id">
                                <a href="#">
                                    @if (c.IsSubItem)
                                    {
                                        <span> -- </span>
                                    }
                                    @c.Name
                                </a>
                            </li>
                        }
                    </ul>
                </div>
                
                @Html.TextBoxFor( m => m.Keyword , new
                {
                    @class = "form-control",
                    placeholder = "product keyword",
                    
                })
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-addon">Price: </div>
                
                @Html.TextBoxFor( m => m.Price , new
                {
                    @class = "form-control text-right"
                })

                <div class="input-group-addon">$</div>
            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-addon">Shipping: </div>

                @Html.DropDownListFor( 
                    m => m.Shipmethod , 
                    Model.ShipMethods , 
                    new
                    {
                        @class = "form-control"
                    })

            </div>
        </div>
        <div class="form-group">
            <div class="input-group">
                <button class="btn btn-primary" type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
        </div>
    }

    <script src="~/Scripts/searchpartial.js"></script>
</div>

